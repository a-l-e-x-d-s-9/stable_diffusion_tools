{
  "repository": "owner/main-repo",
  "token_file": "/home/alex/.hf_token_main",
  "threads": 4,
  "remove": false,
  "dry_run": true,
  "default_exists": "skip",
  "default_commit_message": "batch upload {timestamp}",
  "use_checksum": false,
  "progress_colour": "yellow",
  "max_inflight_per_repo": 2,

  "archive_defaults": {
    "mode": "none",
    "name_template": "{source_basename}_{timestamp}.zip",
    "preserve_tree_inside": true,
    "strip_components": 0,
    "remove_archives_after_upload": false,
    "remove_originals_after_archive": false,
    "level": 6
  },

  "source_base": "/data",

  "sources": [
    {
      "path_in_repository": "SetA",
      "include": [
        "setA/**/*.safetensors",
        "setA/**/*.json",
        "setA/**/*.txt"
      ],
      "exclude": [
        "setA/**/*.tmp",
        "setA/**/~*"
      ],
      "preserve_tree": true,
      "destinations": [
        {
          "repository": "owner/main-repo"
        },
        {
          "repository": "partnerOrg/mirror-repo",
          "token_file": "/home/alex/.hf_token_partner",
          "exists": "skip",
          "commit_message": "mirror: {timestamp}",
          "archive": {
            "mode": "zip_per_file",
            "name_template": "{stem}.zip"
          }
        }
      ]
    },

    {
      "path_in_repository": "FlatB",
      "include": [
        "/absolute/path/to/some/file.safetensors",
        "setB/**/*.safetensors"
      ],
      "exclude": [],
      "preserve_tree": false,
      "destinations": {
        "repository": "owner/main-repo"
      }
    },

    {
      "path_in_repository": "Bundles",
      "include": [
        "setA/**/*.safetensors"
      ],
      "archive": {
        "mode": "zip_source",
        "name_template": "setA_{timestamp}.zip",
        "preserve_tree_inside": true
      },
      "destinations": [
        { "repository": "owner/main-repo" }
      ]
    },

    {
      "path_in_repository": "SetA",
      "include": [
        "setA/**/*"
      ],
      "archive": {
        "mode": "zip_folders",
        "folders_glob": "setA/**/sample",
        "name_template": "{folder_name}.zip",
        "preserve_repo_tree": true,
        "preserve_tree_inside": true,
        "strip_components": 0
      },
      "destinations": [
        { "repository": "owner/main-repo" }
      ]
    }
  ]
}
